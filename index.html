<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>Carte des références – Ithéa Conseil</title>
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <link rel="stylesheet" href="styles.css" />

  <!-- Leaflet -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" crossorigin="" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" crossorigin=""></script>

  <!-- Utils -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@mapbox/leaflet-pip@1.1.0/leaflet-pip.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@turf/turf@6.5.0/turf.min.js"></script>

</head>

<body>
  <div id="app">
    <div id="map"></div>
    <!-- juste après <div id="map"></div> -->
<button id="panelToggleFloating" aria-label="Afficher/Masquer les résultats">⟩</button>

    <aside id="panel">
<header class="panel-header">
  <div class="brand">
    <h1>Nos interventions</h1>
    <p class="muted">Carte & liste filtrables</p>
  </div>
</header>


      <section class="controls">
        <div class="search-row">
          <input id="globalSearch" type="search" placeholder="Rechercher (collectivité, type, région, mots-clés…)" autocomplete="off">
          <button id="clearSearch" title="Effacer">✕</button>
        </div>

        <div class="chips" id="chipsTypes">
          <!-- Tags de types normalisés (rendus dynamiquement) -->
        </div>

        <div class="scope">
          <div id="scopeLabel">France</div>
          <div class="counts">
            <span id="totalRefs">–</span> références •
            <span id="visibleCount">–</span> résultats
          </div>
          <button id="resetFilters" class="soft">Réinitialiser</button>
        </div>
      </section>

      <section id="tableWrap">
        <table id="results">
          <thead>
            <tr>
              <th style="width:40%">Territoire</th>
              <th style="width:40%">Type</th>
              <th style="width:20%">Date</th>
            </tr>
          </thead>
          <tbody id="resultsBody">
            <!-- Lignes rendues dynamiquement -->
          </tbody>
        </table>
        <div id="emptyState" class="hidden">
          Aucun résultat. Modifiez vos filtres ou la recherche.
        </div>
      </section>
    </aside>
    
  </div>

  <div id="loader" class="loader">
    <div class="spinner"></div>
    <div>Chargement des données…</div>
  </div>

  <script src="script1.js"></script>
</body>
</html>
